[5min]: https://zenodo.org/records/13345266/files/5min.tar.bz2
[daily]: https://zenodo.org/records/13345266/files/daily.tar.bz2
[scans]: https://zenodo.org/records/13345266/files/scans.tar.bz2

[2022]: https://zenodo.org/records/13345214/files/profiles_2022.tar.bz2
[2021]: https://zenodo.org/records/13345214/files/profiles_2021.tar.bz2
[2020]: https://zenodo.org/records/13345214/files/profiles_2020.tar.bz2
[2019]: https://zenodo.org/records/13345210/files/profiles_2019.tar.bz2
[2018]: https://zenodo.org/records/13345210/files/profiles_2018.tar.bz2
[2017]: https://zenodo.org/records/13345210/files/profiles_2017.tar.bz2
[2016]: https://zenodo.org/records/13345210/files/profiles_2016.tar.bz2
[2015]: https://zenodo.org/records/13345210/files/profiles_2015.tar.bz2
[2014]: https://zenodo.org/records/13345206/files/profiles_2014.tar.bz2
[2013]: https://zenodo.org/records/13345206/files/profiles_2013.tar.bz2
[2012]: https://zenodo.org/records/13345206/files/profiles_2012.tar.bz2
[2011]: https://zenodo.org/records/13345206/files/profiles_2011.tar.bz2
[2010]: https://zenodo.org/records/13345206/files/profiles_2010.tar.bz2
[2009]: https://zenodo.org/records/13345204/files/profiles_2009.tar.bz2
[2008]: https://zenodo.org/records/13345204/files/profiles_2008.tar.bz2
[2007]: https://zenodo.org/records/13345204/files/profiles_2007.tar.bz2
[2006]: https://zenodo.org/records/13345204/files/profiles_2006.tar.bz2
[2005]: https://zenodo.org/records/13345204/files/profiles_2005.tar.bz2
[2004]: https://zenodo.org/records/13345202/files/profiles_2004.tar.bz2
[2003]: https://zenodo.org/records/13345202/files/profiles_2003.tar.bz2
[2002]: https://zenodo.org/records/13345202/files/profiles_2002.tar.bz2
[2001]: https://zenodo.org/records/13345202/files/profiles_2001.tar.bz2
[2000]: https://zenodo.org/records/13345202/files/profiles_2000.tar.bz2
[1999]: https://zenodo.org/records/13345174/files/profiles_1999.tar.bz2
[1998]: https://zenodo.org/records/13345174/files/profiles_1998.tar.bz2
[1997]: https://zenodo.org/records/13345174/files/profiles_1997.tar.bz2
[1996]: https://zenodo.org/records/13345174/files/profiles_1996.tar.bz2
[1995]: https://zenodo.org/records/13345174/files/profiles_1995.tar.bz2

[scans-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/scans.tar.bz2
[5min-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/5min.tar.bz2
[daily-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/daily.tar.bz2

[1995-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_1995.tar.bz2
[1996-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_1996.tar.bz2
[1997-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_1997.tar.bz2
[1998-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_1998.tar.bz2
[1999-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_1999.tar.bz2
[2000-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2000.tar.bz2
[2001-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2001.tar.bz2
[2002-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2002.tar.bz2
[2003-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2003.tar.bz2
[2004-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2004.tar.bz2
[2005-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2005.tar.bz2
[2006-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2006.tar.bz2
[2007-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2007.tar.bz2
[2008-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2008.tar.bz2
[2009-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2009.tar.bz2
[2010-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2010.tar.bz2
[2011-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2011.tar.bz2
[2012-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2012.tar.bz2
[2013-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2013.tar.bz2
[2014-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2014.tar.bz2
[2015-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2015.tar.bz2
[2016-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2016.tar.bz2
[2017-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2017.tar.bz2
[2018-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2018.tar.bz2
[2019-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2019.tar.bz2
[2020-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2020.tar.bz2
[2021-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2021.tar.bz2
[2022-um]: https://doppler.cs.umass.edu/darkecodata/1.0.0/profiles_2022.tar.bz2

# Dark Ecology Dataset

[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345266.svg)](https://doi.org/10.5281/zenodo.13345266) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345214.svg)](https://doi.org/10.5281/zenodo.13345214) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345210.svg)](https://doi.org/10.5281/zenodo.13345210) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345206.svg)](https://doi.org/10.5281/zenodo.13345206) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345204.svg)](https://doi.org/10.5281/zenodo.13345204) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345202.svg)](https://doi.org/10.5281/zenodo.13345202) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345174.svg)](https://doi.org/10.5281/zenodo.13345174) 

[**Organization**](#organization)
| [**Downloads**](#downloads)
| [**Citation**](#citation)
| [**Documentation**](https://darkecology.github.io/dataset/)


<!-- [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345266.svg)](https://doi.org/10.5281/zenodo.13345266) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345214.svg)](https://doi.org/10.5281/zenodo.13345214) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345210.svg)](https://doi.org/10.5281/zenodo.13345210) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345206.svg)](https://doi.org/10.5281/zenodo.13345206) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345204.svg)](https://doi.org/10.5281/zenodo.13345204) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345202.svg)](https://doi.org/10.5281/zenodo.13345202) [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345174.svg)](https://doi.org/10.5281/zenodo.13345174)  -->

## Overview

The [Dark Ecology Dataset](https://darkecology.github.io/dataset/) is an open dataset of historical bird migration activity in every US weather radar scan from 1995 to 2022. This repository provides the folder structure and supporting files for the dataset. The data files themselves are hosted on [zenodo](https://zenodo.org/) and mirrored at UMass, and need to be downloaded and extracted into the `data/` directory.

## Quick Start

1. Clone this repository.
2. Download the [daily time series][daily] data file and save as `data/daily.tar.bz2`.
3. Extract the data file:
   ```bash
   cd data
   tar -xjvf data/daily.tar.bz2
   ``` 
4. Open `scripts/quick_start.ipynb` to explore the data.

Other data products can be downloaded and extracted similarly. See the [downloads](#downloads) section below. A [download script](#download-script) is also provided.

## Organization

The data directory, when populated, has this structure:
```
data/
├── meta/                   # metadata
├── profiles/               # profile data
├── scans/                  # scan-level time series
├── 5min/                   # 5-minute time series
└── daily/                  # daily time series
```

The `meta` subfolder is distributed with this repo and contains [NEXRAD radar station metadata](data/meta/nexrad-stations.csv). All other data files must be downloaded separately. The other subfolders correspond to the four types of data products:

* **[Profile data](https://darkecology.github.io/dataset/profiles/)**: Vertical profiles of biological activity for each radar scan. The most detailed data.
* **[Scan-level time series](https://darkecology.github.io/dataset/time-series/#scan-level-time-series)**: Time series of biological activity for each radar station at irregular time intervals of 4-10 minutes corresponding to original radar scans.
* **[5-minute time series](https://darkecology.github.io/dataset/time-series/#5-minute-time-series)**: Time series of biological activity for each radar station at 5-minute time intervals.
* **[Daily time series](https://darkecology.github.io/dataset/daily/)**: Time series of biological activity for each radar station at daily time step. 

Read the [documentation](https://darkecology.github.io/dataset/) for details of these data products. In addition to the `data` folder, the repo has other top-level folders for [`scripts`](scripts) and [`schemas`](schemas), the latter of which has data schemas using [Frictionless Table Schema](https://specs.frictionlessdata.io//table-schema/).

## Downloads

Data files can be downloaded from either Zenodo or UMass. Larger files can take minutes to hours download, so you may prefer one of the archives based on download performance. Time series data files cover the entire time period from 1995-2022, while the raw profile data is distributed by year. 

### Time Series Data

| Data | Filename | Size | Uncompressed Size | Download Links |
|-|-|-|-|-|
| Daily time series | daily.tar.bz2 | 142M | 457M | [[zenodo]][daily] [[umass]][daily-um] |
| 5-minute time series | 5min.tar.bz2 | 14G | 54G | [[zenodo]][5min] [[umass]][5min-um] |
| Scan-level time series | scans.tar.bz2 | 11G | 35G | [[zenodo]][scans] [[umass]][scans-um] |

### Profile Data

Profile data is organized by year with filenames like `profiles_1999.tar.bz2`. Download sizes are 5G-9G for each year and uncompress to about 25G-50G. Note that in addition to the time required to download these files, each year of profile data includes millions files and may take over an hour to extract.

| Download Links - Zenodo | Download Links - UMass |
|--------|-------|
| [1995][] [1996][] [1997][] [1998][] [1999][] <br/> [2000][] [2001][] [2002][] [2003][] [2004][] <br/> [2005][] [2006][] [2007][] [2008][] [2009][] <br/> [2010][] [2011][] [2012][] [2013][] [2014][] <br/> [2015][] [2016][] [2017][] [2018][] [2019][] <br/> [2020][] [2021][] [2022][] | [1995][1995-um] [1996][1996-um] [1997][1997-um] [1998][1998-um] [1999][1999-um] <br/> [2000][2000-um] [2001][2001-um] [2002][2002-um] [2003][2003-um] [2004][2004-um] <br/> [2005][2005-um] [2006][2006-um] [2007][2007-um] [2008][2008-um] [2009][2009-um] <br/> [2010][2010-um] [2011][2011-um] [2012][2012-um] [2013][2013-um] [2014][2014-um] <br/> [2015][2015-um] [2016][2016-um] [2017][2017-um] [2018][2018-um] [2019][2019-um] <br/> [2020][2020-um] [2021][2021-um] [2022][2022-um] |

### Download Script

A Python script (`scripts/download.py`) is provided to automate downloading and extraction. Here are some examples:

```bash
python scripts/download.py --daily                    # daily time series
python scripts/download.py --daily --5min --scans     # all time series
python scripts/download.py --profiles 2010,2015-2017  # selected profiles
python scripts/download.py --all                      # all data (very long!)
```

The full usage is:

```
usage: download.py [-h] [--out OUT] [--all] [--profiles PROFILES] [--scans] [--5min] [--daily] [--no-extract]
                   [--delete-archives] [--dry-run] [--force] [--mirror {zenodo,umass}]

Download and extract Dark Ecology dataset archives

options:
  -h, --help            show this help message and exit
  --out OUT             Output directory (default: data)
  --all                 Download all known items (may be very large)
  --profiles PROFILES   Comma-separated years and ranges to download, e.g. '2012' or '2012,2014,2016' or '2012-2022'
  --scans               Download scans archive
  --5min                Download 5-minute archive
  --daily               Download daily archive
  --no-extract          Don't extract .tar.bz2 archives after download
  --delete-archives     Delete .tar.bz2 archives after extraction (default: keep)
  --dry-run             Show which URLs would be downloaded and exit (no network activity)
  --force               Overwrite existing files.
  --mirror {zenodo,umass}
                        Which mirror to download from (default: zenodo)
```

## Citation

The [Dark Ecology Project](https://darkecology.github.io/) is a joint effort of the University of Massachusetts Amherst and the Cornell Lab of Ornithology. The dataset is provided under a [CC-BY-4.0](https://creativecommons.org/licenses/by/4.0/) license. If you use this dataset, please cite:

```text
Daniel Sheldon, Kevin Winner, Iman Deznabi, Garrett Bernstein, Pankaj Bhambani, Tsung-Yu Lin, 
Peter Desmet, Adriaan M. Dokter, Kyle G. Horton, Cecilia Nilsson, Benjamin M. Van Doren, 
Andrew Farnsworth, Frank A. La Sorte, and Subhransu Maji. 
Measurements of Aerial Biomass in US Weather Radar from 1995 to 2022. 
https://darkecology.github.io/dataset, 2023
```

Please also cite the zenodo records for the data files you use:

| data | record |
|-|-|
| Time series data | [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345266.svg)](https://doi.org/10.5281/zenodo.13345266) |
| Profiles, 2020–2022 | [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345214.svg)](https://doi.org/10.5281/zenodo.13345214) |
| Profiles, 2015-2019 | [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345210.svg)](https://doi.org/10.5281/zenodo.13345210) |
| Profiles, 2010-2014 | [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345206.svg)](https://doi.org/10.5281/zenodo.13345206) |
| Profiles, 2005-2009 | [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345204.svg)](https://doi.org/10.5281/zenodo.13345204) |
| Profiles, 2000-2004 | [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345202.svg)](https://doi.org/10.5281/zenodo.13345202) |
| Profiles, 1995-1999 | [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.13345174.svg)](https://doi.org/10.5281/zenodo.13345174) |
